<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>Väggtimer – felsäker skalning</title>
<style>
  html,body{margin:0;height:100%;background:#111;color:#fff;overflow:hidden;font-family:sans-serif;}
  #stage{
    position:absolute;
    width:1280px;
    height:800px;
    left:0; top:0;
    background:#222; /* syns alltid, bara för debug */
    display:grid;
    place-items:center;
    transform-origin:0 0;
    color:white;
  }
  #time{font-size:200px;font-weight:900;}
</style>
</head>
<body>
<div id="stage">
  <div id="time">LOADING…</div>
</div>
<script>
const stage=document.getElementById('stage');
const timeEl=document.getElementById('time');

function applyScale(){
  // skydd mot gamla WebView som rapporterar 0
  const ww=Math.max(100, window.innerWidth  || document.documentElement.clientWidth  || 0);
  const wh=Math.max(100, window.innerHeight || document.documentElement.clientHeight || 0);
  const BASE_W=1280, BASE_H=800;

  let s=Math.min(ww/BASE_W, wh/BASE_H);
  s=Math.max(0.1,Math.min(4,s));

  const x=(ww-BASE_W*s)/2;
  const y=(wh-BASE_H*s)/2;

  stage.style.transform=`translate(${x}px,${y}px) scale(${s})`;

  // Visa lite info för felsökning
  console.log('applyScale()', {ww,wh,s,x,y});
}

window.addEventListener('resize',applyScale);
window.addEventListener('orientationchange',applyScale);

function loop(){
  const n=new Date();
  const t=n.toLocaleTimeString('sv-SE');
  timeEl.textContent=t;
  requestAnimationFrame(loop);
}

applyScale();
loop();
</script>
</body>
</html>
